#import "typst_lib/doc_template.typ": *

#show: doc.with(
  title: "–ú–û–û–†–° ‚Äî —Å–∞–π—Ç —Ñ–µ–¥–µ—Ä–∞—Ü–∏–∏ —Å–ø–∏–¥–∫—É–±–∏–Ω–≥–∞",
  subtitle: "–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç –ú–µ–∂—Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω–æ–π –æ–±—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —Ä–∞–∑–≤–∏—Ç–∏—è —Å–ø–∏–¥–∫—É–±–∏–Ω–≥–∞",
  author: "–ú–û–û–†–°",
  date: "2025"
)

= –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–∞–π—Ç–∞

== –î–ª—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

#feature-list((
  (icon: "üéØ", title: "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç", description: "—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–º, –ø—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏"),
  (icon: "üèÜ", title: "–°–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è", description: "–ø—Ä–æ—Å–º–æ—Ç—Ä –∫–∞–ª–µ–Ω–¥–∞—Ä—è, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è, –¥–æ—Å—Ç—É–ø –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º"),
  (icon: "üìä", title: "–†–µ–π—Ç–∏–Ω–≥–∏", description: "—Ä–µ–π—Ç–∏–Ω–≥–∏ –ø–æ –≤—Å–µ–º –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞–º —Å–ø–∏–¥–∫—É–±–∏–Ω–≥–∞"),
  (icon: "üìú", title: "–î–æ–∫—É–º–µ–Ω—Ç—ã", description: "–¥–æ—Å—Ç—É–ø –∫ —Ä–µ–≥–ª–∞–º–µ–Ω—Ç–∞–º, –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º –∏ –¥—Ä—É–≥–∏–º –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º"),
  (icon: "üë§", title: "–ü—Ä–æ—Ñ–∏–ª–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤", description: "–ø—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –¥—Ä—É–≥–∏—Ö —Å–ø–∏–¥–∫—É–±–µ—Ä–æ–≤"),
))

== –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

#feature-list((
  (icon: "‚ûï", title: "–°–æ–∑–¥–∞–Ω–∏–µ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–π", description: "–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –≤—Å–µ—Ö –¥–µ—Ç–∞–ª–µ–π"),
  (icon: "üìã", title: "–í—ã–±–æ—Ä –¥–∏—Å—Ü–∏–ø–ª–∏–Ω", description: "–Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è"),
  (icon: "üë•", title: "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏", description: "–∫–æ–Ω—Ç—Ä–æ–ª—å –ª–∏–º–∏—Ç–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏ –ø–µ—Ä–∏–æ–¥–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏"),
))

== –î–ª—è –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π

#feature-list((
  (icon: "üì∞", title: "–ù–æ–≤–æ—Å—Ç–∏", description: "–∞–∫—Ç—É–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–∏—Ä–µ —Å–ø–∏–¥–∫—É–±–∏–Ω–≥–∞"),
  (icon: "‚ÑπÔ∏è", title: "–û —Ñ–µ–¥–µ—Ä–∞—Ü–∏–∏", description: "–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ú–û–û–†–° –∏ –µ—ë –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏"),
  (icon: "ü§ù", title: "–ß–ª–µ–Ω—Å—Ç–≤–æ", description: "–∫–∞–∫ –≤—Å—Ç—É–ø–∏—Ç—å –≤ —Ñ–µ–¥–µ—Ä–∞—Ü–∏—é"),
  (icon: "üìû", title: "–ö–æ–Ω—Ç–∞–∫—Ç—ã", description: "—Å–≤—è–∑—å —Å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞–º–∏"),
))

= –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- *Backend:* PHP 8.2+, Composer, PSR-4 –∞–≤—Ç–æ–ª–æ–∞–¥–∏–Ω–≥
- *Database:* PostgreSQL 16
- *Frontend:* HTML, CSS, –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –¥–∏–∑–∞–π–Ω
- *–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:* Docker Compose (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

= –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

== 1) –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

=== macOS/Linux

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏ Homebrew (macOS)
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# –£—Å—Ç–∞–Ω–æ–≤–∏ PHP –∏ Composer
brew install php composer

# PostgreSQL —á–µ—Ä–µ–∑ Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
brew install docker
# –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é: brew install postgresql@16
```

== 2) –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ PHP
composer install

# –°–∫–æ–ø–∏—Ä—É–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
cp .env.example .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π `.env` –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î:

```env
DB_HOST=127.0.0.1
DB_PORT=5433
DB_DATABASE=moorc_dev
DB_USERNAME=moorc
DB_PASSWORD=moorc
```

== 3) –ó–∞–ø—É—Å–∫ PostgreSQL

=== –° Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
docker compose up -d
```

Adminer –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ http://localhost:8080

=== –ë–µ–∑ Docker

```bash
createuser -s moorc
createdb moorc_dev -O moorc
```

== 4) –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π

```bash
psql -h 127.0.0.1 -p 5433 -U moorc -d moorc_dev -f migrations/001_init.sql
psql -h 127.0.0.1 -p 5433 -U moorc -d moorc_dev -f migrations/002_speedcubing_schema.sql
psql -h 127.0.0.1 -p 5433 -U moorc -d moorc_dev -f migrations/003_add_admin_role.sql
```

#warning[
–ú–∏–≥—Ä–∞—Ü–∏—è `003_add_admin_role.sql` —Å–æ–∑–¥–∞—ë—Ç —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:
- Email: `admin@moorc.ru`
- –ü–∞—Ä–æ–ª—å: `admin123`

*–í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–º–µ–Ω–∏—Ç–µ —ç—Ç–æ—Ç –ø–∞—Ä–æ–ª—å!*
]

== 5) –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
composer start
# –∏–ª–∏
php -S localhost:8000 -t public
```

–°–∞–π—Ç –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ http://localhost:8000

= –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

- `/` ‚Äî –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- `/competitions` ‚Äî –∫–∞–ª–µ–Ω–¥–∞—Ä—å —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–π  
- `/competitions/create` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤)
- `/rating` ‚Äî —Ä–µ–π—Ç–∏–Ω–≥–∏ —Å–ø–∏–¥–∫—É–±–µ—Ä–æ–≤
- `/register` ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `/login` ‚Äî –≤—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
- `/profile` ‚Äî –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)
- `/documents` ‚Äî –¥–æ–∫—É–º–µ–Ω—Ç—ã —Ñ–µ–¥–µ—Ä–∞—Ü–∏–∏
- `/about` ‚Äî –æ —Ñ–µ–¥–µ—Ä–∞—Ü–∏–∏
- `/contacts` ‚Äî –∫–æ–Ω—Ç–∞–∫—Ç—ã

= –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

== –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

- `users` ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏/—É—á–∞—Å—Ç–Ω–∏–∫–∏
- `competitions` ‚Äî —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è
- `disciplines` ‚Äî –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã (3x3x3, 2x2x2, –∏ —Ç.–¥.)
- `competition_disciplines` ‚Äî –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã –Ω–∞ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è—Ö
- `registrations` ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è
- `results` ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- `documents` ‚Äî –¥–æ–∫—É–º–µ–Ω—Ç—ã —Ñ–µ–¥–µ—Ä–∞—Ü–∏–∏
- `posts` ‚Äî –Ω–æ–≤–æ—Å—Ç–∏ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

= –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ migrations/          # SQL –º–∏–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ public/             # –ü—É–±–ª–∏—á–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
‚îÇ  ‚îú‚îÄ assets/         # CSS, JS, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
‚îÇ  ‚îî‚îÄ index.php       # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ src/               # PHP –∫–ª–∞—Å—Å—ã
‚îÇ  ‚îú‚îÄ Controllers/    # –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
‚îÇ  ‚îú‚îÄ Database.php    # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
‚îÇ  ‚îú‚îÄ Helpers.php     # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ  ‚îú‚îÄ Router.php      # –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è
‚îÇ  ‚îî‚îÄ View.php        # –®–∞–±–ª–æ–Ω–∏–∑–∞—Ü–∏—è
‚îî‚îÄ views/             # HTML —à–∞–±–ª–æ–Ω—ã
   ‚îú‚îÄ auth/           # –°—Ç—Ä–∞–Ω–∏—Ü—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
   ‚îú‚îÄ competitions/   # –°—Ç—Ä–∞–Ω–∏—Ü—ã —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–π
   ‚îú‚îÄ profile/        # –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç
   ‚îú‚îÄ rating/         # –†–µ–π—Ç–∏–Ω–≥–∏
   ‚îî‚îÄ ...
```

= –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

== –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞

–í `public/index.php`:

```php
// GET
$router->get('/path', fn() => $controller->method());

// POST
$router->post('/path', fn($req) => $controller->method($req));

// –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä
$router->get('/path/{id}', fn($req, $id) => $controller->method((int)$id));
```

== –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞

```php
<?php
namespace App\Controllers;

use App\View;

class MyController
{
    public function index(): string
    {
        return View::render('my.view', [
            'title' => '–ó–∞–≥–æ–ª–æ–≤–æ–∫',
            'data' => []
        ]);
    }
}
```

== –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è

`views/my/view.php`:

```php
<?php use App\Helpers; ?>
<section>
  <h1><?= Helpers::e($title) ?></h1>
  <!-- –ö–æ–Ω—Ç–µ–Ω—Ç -->
</section>
```

= –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:

- ‚úÖ *SQL Injection* ‚Äî prepared statements —Å PDO  
- ‚úÖ *XSS* ‚Äî —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ htmlspecialchars()  
- ‚úÖ *–ü–∞—Ä–æ–ª–∏* ‚Äî —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ password_hash()  
- ‚úÖ *–°–µ—Å—Å–∏–∏* ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏  
- ‚úÖ *–í–∞–ª–∏–¥–∞—Ü–∏—è* ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ email –∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π

= –ö–æ–º–∞–Ω–¥—ã

#command-table((
  (command: "composer install", description: "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π"),
  (command: "composer start", description: "–ó–∞–ø—É—Å–∫ dev-—Å–µ—Ä–≤–µ—Ä–∞"),
  (command: "docker compose up -d", description: "–ó–∞–ø—É—Å–∫ –ë–î (Docker)"),
  (command: "docker compose down", description: "–û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ë–î (Docker)"),
  (command: "psql -h 127.0.0.1 -p 5433 -U moorc -d moorc_dev", description: "–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î"),
))

= –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è

- –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- API –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å WCA
- –û–Ω–ª–∞–π–Ω —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏
- Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å
- CI/CD —Å GitHub Actions

= –õ–∏—Ü–µ–Ω–∑–∏—è

¬© 2025 –ú–û–û–†–° ‚Äî –ú–µ–∂—Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω–∞—è –æ–±—â–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Ä–∞–∑–≤–∏—Ç–∏—è —Å–ø–∏–¥–∫—É–±–∏–Ω–≥–∞
